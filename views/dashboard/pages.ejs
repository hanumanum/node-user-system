<!doctype html>
<html>
<head>
    <%- include("../partials/resourses/styles-bootstrap") %>
    <%- include("../partials/resourses/styles-datatable") %>
    <link rel="stylesheet" href="/styles/style.css">
    <title><%=identity.title %></title>
</head>
<body>
    <div class="container-fluid">
            <%- include("../partials/backend/header") %>    
            <main class="row">
                <div class="col-2">
                    <%- include("../partials/backend/leftnav") %>
                </div>
                <div class="col-10">
                    <div class="row">
                        <div class="col-10">
                            <h2>All Pages</h2>
                        </div>
                        <div class="col-2">
                            <a href="/dashboard/pages/add" class="btn btn-primary float-right"><i class="fas fa-plus"></i> New</a>
                        </div>
                    </div>

                  
                  <hr>
                  <% if(pages) {%>
                    <table id="datatable" class="table table-bordered">
                    <thead>
                        <tr>
                            <th>ID</th>    
                            <th>Title</th>
                            <th>Author</th>
                            <th>ChangeDate</th>
                            <th>CreateDate</th>
                            <th>View</th>
                            <th>Published</th>
                            <th>Edit</th>
                            <th>Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% pages.forEach(function(page){ %>
                            <tr>
                                <td><%=page.id %></td>    
                                <td><%=page.title %></td>
                                <td><%=page.authorId %></td>
                                <td><%=page.updatedAt.toLocaleDateString("en-US") %></td>
                                <td><%=page.createdAt.toLocaleDateString("en-US") %></td>
                                
                                <td><a target="_blank" href="/pages/<%=page.slug %>"><i class="fas fa-arrow-right"></i></a></td>
                                <td><a href="/dashboard/pages/toggle/<%=page.id %>">
                                        <% if(page.published){ %>
                                            <i class="fas fa-eye"></i>
                                        <% } else { %>
                                            <i class="fas fa-eye-slash"></i>    
                                        <% } %>
                                    </a>
                                </td>

                                <td><a href="/dashboard/pages/edit/<%=page.id %>"><i class="fas fa-edit"></i></a></td>

                                <td><a href="/dashboard/pages/delete/<%=page.id %>"><i class="fas fa-trash"></i></a></td>
                            </tr>
                        <% }); %>
                    </tbody>
                    </table>
                  <% } %>
                </div>
            </main>
    </div>

    <%- include("../partials/resourses/scripts-bootstrap") %>
    <%- include("../partials/resourses/scripts-datatable") %>
    <%- include("../partials/backend/footer") %>
</body>

</html>